# Copyright 2022 Canonical Ltd
# See LICENSE file for licensing details.

# For a complete list of supported options, see:
# https://juju.is/docs/sdk/metadata-reference
name: juju-jimm-k8s
display-name: |
  JIMM
description: |
  Juju controller used by the JAAS service to manage models across a 
  number of clouds.
summary: |
  JAAS Intelligent Model Manager.

peers:
  jimm:
    interface: jimm

provides:
  dashboard:
    interface: juju-dashboard

requires:
  ingress:
    interface: ingress
    limit: 1
  nginx-route:
    interface: nginx-route
  database:
    interface: postgresql_client
    limit: 1
  openfga:
    interface: openfga
    limit: 1
  certificates:
    interface: tls-certificates
    limit: 1
  vault:
    interface: vault-kv
    optional: true

containers:
  jimm:
    resource: jimm-image

resources:
  dashboard:
    type: file
    filename: dashboard.tar.xz
    description: "juju dashboard tarball."
  jimm-image:
    type: oci-image
    description: OCI image for JIMM.
